sudo: required

language: node_js

node_js:
  - node
  - 8

install:
  - npm install

script:
  - npm run lint
  - npm run test
  - npm run build

services:
  - docker

aliases:
  deploy: &deploy
    provider: heroku
    api_key:
      secure: GY8Xmw+14Agka96qpFNIhim+qXlS8ULGvgZsAaTk5YyJn3uQd7oW0L/6GxK0pP4ksMVmE4rTdc6xPbGR8bvjeLYKlWTbXqj4fHFgkQWhFRAY+BhegDBYAh9Sy9akUEwkZ6SFzAlAklFE1QCXG//+3A2OpAx3C87B3Sj+w0C4RuFlVhaHAnA0o0CIkVKfUY9OiYLEJwpl77kBQQi8WebeRDPdJkiBmeOSXjjZUDbPnn2Xii4qLiz/w5lhWVXHstemc0zUh+LpydGS7ejyfWHEDKbhSaplDWuiNABQLdIxzHzyQSi+UTdeEH6wjxgRI6VA2GgVMFigCtQvC93Y2K++vZQde3Dg3+f7kuzP+TFFGf5K+TX+MxEOOdVJ+1GtxmfUUDisfqmel75vdJRsdq7bVEYSXnqm6wFp+Qi27XAi2dqxEKQm+aDlOWzDvzNcExPgeTyqq6VPy2+TTg7EZgAvI5e4DzxvTAs0h/seuwYvLZZF0jZ9tLpbNxG046OXfGOXL3al+bJ21tz/SHddSbjT1gqv/L4va67m1Lu6lrHFBhrbjpmqPLKDy8V3ObY7c5/7WHTTSBqYJplNHEMR5DpBcv3drlN642r9Krcib9ncW7JVc+UWP5Qfrj0TqINOW4tdt4PURYS2JkLSkeaXBps5fT8zt1M6ihedoXWJg/2Y/nQ=
    skip_cleanup: true

jobs:
  include:
    - stage: deploy to review
      script:
        - npm run build
      deploy:
        <<: *deploy
        app: task-4-node
        on:
          all_branches: true

